{
  "variables": {
    "scaleway_key": "",
    "scaleway_token": "",
    "scaleway_private_key_path": "~/.ssh/scaleway",
    "scaleway_user": "root",
    "scaleway_region": "ams1",
    "scaleway_source_image_par1": "c564be4f-2dac-4b1b-a239-3f3a441700ed",
    "scaleway_source_image_ams1": "90d69ee1-2049-49ef-819c-dce675037477",
    "scaleway_commercial_type": "START1-XS",
    "artifact_name": "node-snapshot-mini",
    "ansible_task": "",
    "ansible_roles": ""
  },
  "builders": [
    {
      "type": "scaleway",
      "api_access_key": "{{ user `scaleway_key` }}",
      "api_token": "{{ user `scaleway_token` }}",
      "image_name": "{{ user `artifact_name` }}",
      "image": "{{ user `scaleway_source_image_ams1` }}",
      "region": "{{ user `scaleway_region` }}",
      "commercial_type": "{{ user `scaleway_commercial_type` }}",
      "ssh_private_key_file": "{{ user `scaleway_private_key_path` }}",
      "ssh_username": "{{ user `scaleway_user` }}"
    }
  ],
  "provisioners": [
    {
      "type": "ansible",
      "playbook_file": "{{ user `ansible_task` }}",
      "ansible_env_vars": [
        "ANSIBLE_ROLES_PATH={{ user `ansible_roles` }}",
        "ANSIBLE_RETRY_FILES_ENABLED=False"
      ],
      "user": "{{ user `scaleway_user` }}"
    }
  ]
}
